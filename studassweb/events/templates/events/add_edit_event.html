{% extends "events/base.html" %}

{% load i18n %}
{% load bootstrap3 %}
{% load static %}

{% block breadcrumb2 %}
    <li class="active">
        {% if form.instance.pk %}
            {% trans "Editing" %}
            {{ form.instance.title }}
        {% else %}
            {% trans "New Event" %}
        {% endif %}
    </li>
{% endblock %}


{% block main_content %}
    {% if form.instance.pk %}
        <form action="{% url 'events_delete_event' form.instance.pk %}" method="post" onclick="return confirm('{% trans "Are you sure?" %}')">
            {% csrf_token %}
            {% buttons %}
                <button type="submit" class="btn btn-danger">
                    {% trans "Remove this event" %}
                </button>
            {% endbuttons %}
        </form>
    {% endif %}

    <form action="" method="post">
        {% csrf_token %}
        {{ form.media }}
        {% bootstrap_form form %}
        {% bootstrap_form form_items %}
        {% buttons %}
            <button type="submit" class="btn btn-primary">
                {% trans "Submit" %}
            </button>
        {% endbuttons %}
    </form>

{% endblock %}

{% block scripts %}
    <link rel="stylesheet" type="text/css" href="{% static "css/base/jquery.datetimepicker.css" %}"/>
    <script src="{% static "js/base/jquery.datetimepicker.js" %}"></script>
    <script type="text/javascript">
        $(function () {

            //Set up datetimepicker
            $( "#{{ form.signup_start.id_for_label }}" ).datetimepicker({
                dayOfWeekStart: 1,
                format: "d.n.Y H:i"
            });
            $( "#{{ form.signup_deadline.id_for_label }}" ).datetimepicker({
                dayOfWeekStart: 1,
                format: "d.n.Y H:i"
            });
            $( "#{{ form.start.id_for_label }}" ).datetimepicker({
                dayOfWeekStart: 1,
                format: "d.n.Y H:i"
            });
            $( "#{{ form.stop.id_for_label }}" ).datetimepicker({
                dayOfWeekStart: 1,
                format: "d.n.Y H:i"
            });
        })
    </script>
{% endblock %}

{% block helppanel %}
    <div class= "panel-heading">
        <h2 class="panel-title" data-toggle="collapse" data-target="#helptext">
            {% trans "Help" %}
            <span class="glyphicon caret pull-right"></span>
        </h2>
    </div>
    <div id="helptext" class="panel-collapse collapse helptext-collapse">
        <div class="panel-body">
            <p>{% trans "This is where you create events." %}</p>
            <p>{% trans "Each field except event items (eitems) is required by default." %}</p>
        </div>
    </div>
{% endblock %}