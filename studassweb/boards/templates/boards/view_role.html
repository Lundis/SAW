{% extends "boards/base.html" %}

{% load i18n %}
{% load bootstrap3 %}
{% load sawp %}
{% load thumbnail %}

{% block breadcrumb2 %}
    <li>
        <a href="{{ role.get_absolute_url }}">
            {{ role.name }}
        </a>
    </li>
{% endblock %}

{% block main_content %}
    <h1>{{ role.name }}</h1>
    <div class="list-group">

        {% for boardmember in boardmembers %}
            <a class="list-group-item" href="{{ boardmember.get_absolute_url }}">
                {% if boardmember.photo %}
                    <img  class="img-thumbnail" src="{{ boardmember.photo|thumbnail_url:'standard' }}"/>
                {% endif %}
                {{ boardmember.member.get_full_name }} ({{ boardmember.board}})
            </a>
        {% empty %}
            <p>{% trans "No members with this role found!" %}</p>
            <form action="{% url 'boards_delete_role' role.id %}" method="post">
                {% csrf_token %}
                {% buttons %}
                    <button type="submit" class="btn btn-danger" onclick="return confirm('{% trans "Are you sure?" %}')">
                        {% trans "Remove this role" %}
                    </button>
                {% endbuttons %}
            </form>
        {% endfor %}
    </div>
{% endblock %}
{% block sidebar %}
    {% has_perm "boards" "CAN_EDIT_BOARDS" as can_edit_boards %}
    {% has_perm "boards" "CAN_EDIT_ROLES" as can_edit_roles %}
    {% has_perm "boards" "CAN_EDIT_BOARDTYPES" as can_edit_boardtypes %}
    {% if can_edit_boards or can_edit_roles or can_edit_boardtypes%}
        <div class="panel panel-primary">
            <div class="panel-heading">
                <h2 class="panel-title">{% trans "Edit" %}</h2>
            </div>
            <div class="panel-body">
                <div class="list-group">
                    {% if can_edit_boards%}
                        <a href="{% url 'boards_edit_role' role.id %}">
                            <div class="btn list-group-item">{% trans "Edit this role" %}</div>
                        </a>
                    {% endif %}
                </div>
            </div>
            <div class="panel-heading">
                <h2 class="panel-title">{% trans "Add" %}</h2>
            </div>
            <div class="panel-body">
                <div class="list-group">
                    {% if can_edit_boards%}
                        <a href="{% url 'boards_add_boardmember' %}">
                            <div class="btn list-group-item">{% trans "Add new board member" %}</div>
                        </a>
                        <a href="{% url 'boards_add_board' %}">
                            <div class="btn list-group-item">{% trans "Add new board" %}</div>
                        </a>
                    {% endif %}
                    {% if can_edit_boardtypes%}
                        <a href="{% url 'boards_add_boardtype' %}">
                            <div class="btn list-group-item">{% trans "Add new boardtype" %}</div>
                        </a>
                    {% endif %}
                    {% if can_edit_roles%}
                        <a href="{% url 'boards_add_role' %}">
                            <div class="btn list-group-item">{% trans "Add new role" %}</div>
                        </a>
                    {% endif %}
                </div>
            </div>
        </div>
    {% endif %}
{% endblock %}