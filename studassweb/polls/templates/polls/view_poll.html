{% extends "polls/base.html" %}

{% load i18n %}
{% load bootstrap3 %}
{% load sawp %}
{% load sidemenu %}

{% block breadcrumb2 %}
    <li class="active">
        {{ poll.name }}
    </li>
{% endblock %}

{% block main_content %}
    <h1>{{ poll.name }}</h1>
    <ul class="list-group">
        <li class="list-group-item"> {{ poll.description | safe }}</li>
        {% if form %}
            <form action="{% url 'polls_view_poll' poll.id %}" method="post">
                {% csrf_token %}
                {% bootstrap_form form %}
                {% buttons %}
                    <button type="submit" class="btn btn-danger">
                        {% trans "Make a choice" %}
                    </button>
                {% endbuttons %}
            </form>
        {% else %}
            {% for c in choices %}
                <div class="row">
                    <div class="col-xs-8">
                        <div class="progress">
                            <div class="progress-bar" role="progressbar" aria-valuenow="60" aria-valuemin="0"
                                 aria-valuemax="100" style="width: {{ c.percentage }}%; color: black;">
                                {{ c.name }}
                            </div>

                        </div>

                    </div>
                    <div class="col-xs-4">
                        {{ c.count_votes }}
                    </div>
                </div>
            {% endfor %}
        {% endif %}


        <div class="table-responsive">
            <table class="table table-striped">
                <tbody>
                <tr>
                    <th>{% trans "Publication date: " %}{{ poll.publication }}</th>
                    <th>{% trans "Expiration date: " %}{{ poll.expiration }}</th>
                    <th>{% trans "Created by: " %}{{ poll.created_by }}</th>

                </tr>
                </tbody>
            </table>
        </div>



    </ul>
{% endblock %}
{% block sidebar-panel1 %}

    {% can_edit_object poll as can_edit_polls %}
    {% if can_edit_polls%}
        {% sidebarpanel %}
            {% trans "Actions" %}
            {% body %}

            <form action="{% url 'polls_delete_poll' poll.id %}" method="post" onsubmit="return confirm('{% trans "Are you sure?" %}')">
                {% csrf_token %}
                <div class="btn-group-vertical btn-block">
                    <a href="{% url 'polls_edit_poll' poll.id %}" class="btn btn-primary">
                        {% trans "Edit poll" %}
                    </a>
                    <button type="submit" class="btn btn-danger">
                        {% trans "Remove this poll" %}
                    </button>

                </div>

            </form>
        {% endsidebarpanel %}

    {% endif %}

{% endblock %}

